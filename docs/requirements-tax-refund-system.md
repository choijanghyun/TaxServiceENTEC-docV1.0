# 법인세/종합소득세 경정청구 환급액 계산 시스템 - 요구사항 정의서

> **Summary**: 법인(법인세)과 개인사업자(종합소득세)의 경정청구 환급액을 극대화하는 AI 기반 통합 점검 시스템의 요구사항, 사용자 스토리, 우선순위 정의
>
> **Project**: TaxServiceENTEC-ATR (통합 경정청구 환급액 산출 시스템)
> **Author**: Product Manager (bkit-product-manager)
> **Created**: 2026-02-18
> **Last Modified**: 2026-02-18
> **Status**: Draft
> **Related Documents**:
> - 개발설계서: `refer-to-doc/참고1번-development-design-v2.md` (v2.1)
> - 법인세 프롬프트: `refer-to-doc/법인세-프롬프트_v2.0.md`
> - 종합소득세 프롬프트: `refer-to-doc/종합소득세-프롬프트_v2.0.md`
> - 업계 리서치: `refer-to-doc/참고2번-industry-research-tax-refund-programs.md`
> - 세법기준 입력자료: `refer-to-doc/경정청구-입력자료-세법기준-정리.md`

---

## 목차

1. [사용자 페르소나](#1-사용자-페르소나)
2. [에픽 정의](#2-에픽-정의)
3. [사용자 스토리](#3-사용자-스토리)
4. [우선순위 매트릭스 (MoSCoW)](#4-우선순위-매트릭스-moscow)
5. [비기능 요구사항](#5-비기능-요구사항)
6. [리스크 및 제약사항](#6-리스크-및-제약사항)

---

## 1. 사용자 페르소나

### 1.1 페르소나 개요

| 페르소나 ID | 명칭 | 역할 | 세목 | 우선도 |
|:----------:|------|------|------|:------:|
| P-01 | 세무사(기장 담당) | 기장 고객의 경정청구 진단 및 신청 대행 | CORP + INC | 최우선 |
| P-02 | 세무법인 매니저 | 다수 고객의 경정청구 업무 조율 및 품질 관리 | CORP + INC | 우선 |
| P-03 | 세무법인 시스템 관리자 | 기준정보 유지보수, 세법 개정 반영 | - | 우선 |
| P-04 | 법인 세무 담당자 | 자사 법인세 경정청구 가능성 자체 검토 | CORP | 차우선 |
| P-05 | 개인사업자 (B2C 확장) | 종합소득세 경정청구 직접 신청 | INC | 미래 |

---

### 1.2 P-01: 세무사 (기장 담당자) - 핵심 사용자

**역할**: 법인/개인사업자 고객의 경정청구 진단부터 신청까지 실무 전담

**목표**:
- 고객당 경정청구 진단 시간을 3시간에서 30분 이내로 단축
- 누락 공제/감면 항목 발굴률 극대화 (환급액 최대화)
- 세법 개정사항(2025년 포함) 자동 반영으로 실수 방지

**주요 과제 (Pain Point)**:
- 77개 점검항목을 수작업으로 검토하면 건당 2~3시간 소요
- 법인(본점 소재지 간주 규정)과 개인(사업장별 개별 판단)의 세목 차이로 인한 계산 오류 발생
- 상호배제 규칙(10개)을 수작업으로 판단할 때 최적 조합 도출 어려움
- 2025년 개정 사항(창업+고용 중복배제, 추가공제율 10% 상향, 청년 판단기준 변경 등) 실시간 반영 어려움
- 이월결손금 FIFO 순서, 최저한세 연산 등 복잡 계산에서 오류 위험

**기술 수준**: 세무 전문가, 시스템 사용 경험 보통

---

### 1.3 P-02: 세무법인 매니저

**역할**: 소속 세무사의 경정청구 업무 성과 관리, 고객 보고서 품질 검토

**목표**:
- 사무소 전체 경정청구 처리 건수 및 환급액 현황 파악
- 고객사별 진행 상태 모니터링
- 감리 및 사후관리(2년간 상시근로자 수 유지) 일정 관리

**주요 과제**:
- 고객별 진행 상태가 분산되어 통합 현황 파악 불가
- 환급 완료 후 사후관리(공제 취소 리스크) 추적 어려움
- 고객 보고서 포맷 표준화 미흡

---

### 1.4 P-03: 시스템 관리자 (기준정보 관리자)

**역할**: 세율 테이블, 상호배제 규칙, 업종 코드 등 기준정보(REF_* 26개 테이블) 유지보수

**목표**:
- 세법 개정 시 기준정보를 오류 없이 신속하게 갱신 (연 1~2회 대규모 개정)
- 기준정보 이력 관리 및 연도별 적용 버전 정확성 보장

**주요 과제**:
- 세율/공제율/한도 등 수십 개 테이블을 직접 DB에서 수정할 때 실수 위험
- 개정 전후 경정청구 기간이 혼재하여 연도별 버전 구분 필수
- 개정사항 검증 방법 부재

---

### 1.5 P-04: 법인 세무 담당자

**역할**: 자사 법인의 세금 신고 및 경정청구 가능성 자체 검토

**목표**:
- 세무사 의뢰 전 예비 검토로 환급 가능성 및 예상 금액 파악
- 주요 공제/감면 항목(통합투자, 통합고용, R&D 등) 해당 여부 자가 진단

**주요 과제**:
- 세법 전문 지식 없이 77개 항목을 직접 판단하기 어려움
- 입력해야 할 자료 목록과 수집 방법 불명확

---

### 1.6 P-05: 개인사업자 (미래 B2C 대상)

**역할**: 종합소득세 경정청구를 직접 신청하고자 하는 소상공인/개인사업자

**목표**:
- 누락된 세액공제 항목(창업감면, 통합고용, R&D 등) 파악 및 환급 신청
- 수수료 없이 직접 처리

**주요 과제**:
- 세법 지식 없이 공동사업자 지분 배분, 감면 소득 배분 계산 어려움
- 다사업장 운영 시 소재지별 개별 판단 개념 이해 어려움
- 홈택스 자료 수집 및 입력 번거로움

---

## 2. 에픽 정의

| 에픽 ID | 에픽명 | 설명 | 주요 사용자 |
|:-------:|--------|------|------------|
| EP-01 | 요청 접수 및 입력 관리 | 경정청구 요청 생성, 납세자 정보 및 세무 자료 입력, 32개 카테고리 데이터 검증 | P-01, P-04 |
| EP-02 | 사전 점검 및 자격 판단 | 경정청구 가능 여부 판단, 중소기업 여부, 소재지 구분, 상시근로자 수 산정 | P-01 |
| EP-03 | 공제/감면 계산 엔진 | 77개 점검항목(법인 40개 + 개인 37개) 자동 산출, 57개 계산 공식 적용 | P-01 |
| EP-04 | 최적 조합 탐색 | 상호배제 10규칙 적용, Branch & Bound 알고리즘, 최저한세/농특세 적용 | P-01 |
| EP-05 | 보고서 생성 및 제출 | 환급액 비교표, 근거 설명, 경정청구서 초안 3종 생성 | P-01, P-02 |
| EP-06 | 기준정보 관리 | 세율/공제율/상호배제 규칙 등 REF_* 26개 테이블 연도별 버전 관리 | P-03 |
| EP-07 | 대시보드 및 현황 관리 | 고객별 진행 상태, 환급 현황, 사후관리 일정 | P-02 |
| EP-08 | 사용자 인증 및 권한 관리 | RBAC 기반 역할별 접근 제어, JWT 인증 | P-01, P-02, P-03 |
| EP-09 | 시뮬레이션 (Phase 2) | 다수 과세연도 시뮬레이션, 사후관리 리스크 평가 | P-01 |
| EP-10 | 홈택스 연동 자동수집 (Phase 3) | RPA/API 기반 홈택스 데이터 자동 수집, 6개년 데이터 | P-01, P-05 |

---

## 3. 사용자 스토리

### 3.1 EP-01: 요청 접수 및 입력 관리

---

#### US-001: 경정청구 요청 생성

**스토리**: 세무사로서, 법인/개인 사업자의 경정청구 요청을 시스템에 등록하고 싶다. 중복 요청 없이 고유한 요청 번호(req_id)를 발급받아 작업 이력을 관리하기 위해.

**인수 조건**:
- 납세자 유형(법인/개인), 사업자번호, 대상 과세연도를 입력하면 req_id가 자동 생성된다
  - 형식: `C-{사업자번호10자리}-{YYYYMMDD}-{순번3자리}` (법인) / `I-...` (개인)
- 동일 신청인, 동일 날짜, 동일 과세연도의 중복 요청 시 기존 req_id를 반환하거나 안내 메시지를 제공한다 (Idempotency-Key 처리)
- 법정신고기한 후 5년을 초과한 과세연도 요청 시 즉시 오류 메시지를 출력하고 요청 생성을 차단한다
- 요청 생성 응답 시간은 1초 이내이다

**스토리 포인트**: 5

---

#### US-002: 법인 세무자료 입력 (32개 카테고리)

**스토리**: 세무사로서, 법인고객의 세무자료를 32개 카테고리(공통 8 + 법인 전용 16)로 구분하여 입력하고 싶다. 각 공제/감면 항목에 필요한 데이터를 누락 없이 수집하기 위해.

**인수 조건**:
- 필수 카테고리(`corp_basic`)는 반드시 입력해야 다음 단계로 진행된다
- 선택 카테고리는 미입력 시 해당 공제/감면 항목 산출이 제외되며, 경고 메시지를 표시한다
- 카테고리별 JSON 입력 데이터는 10MB, 전체 합계는 50MB를 초과할 수 없다
- 입력 완료 후 검증 결과(성공/실패 항목 목록)를 화면에 표시한다
- 원본 입력 데이터는 INSERT ONLY로 보관되며, 수정 시 새 버전이 생성된다 (원본 불변성)

**스토리 포인트**: 8

---

#### US-003: 개인사업자 세무자료 입력

**스토리**: 세무사로서, 개인사업자 고객의 세무자료를 입력할 때 다사업장/공동사업 정보를 포함하여 완전히 입력하고 싶다. 소재지별 감면율 차이, 공동사업자 지분 배분 계산에 오류가 없도록 하기 위해.

**인수 조건**:
- 공동사업자 입력 시 손익분배비율 합계가 100%인지 검증한다
- 다사업장 입력 시 사업장별로 소재지(수도권/비수도권/인구감소지역)를 개별 입력하도록 안내한다
- 공동사업자 여부, 사업장 수 등 필수 항목 미입력 시 다음 단계 진행이 차단된다
- 종합소득금액 합산(사업소득+근로소득+금융소득+연금소득+기타소득) 계산 결과를 실시간으로 표시한다

**스토리 포인트**: 8

---

#### US-004: 입력 데이터 항목별 검증 (107개 규칙)

**스토리**: 세무사로서, 입력한 데이터가 세법 기준에 맞는지 107개 검증 규칙에 따라 자동 검증되기를 원한다. 잘못된 입력값으로 인한 오산출을 방지하기 위해.

**인수 조건**:
- Hard Fail 규칙 위반(예: 이월결손금 기한 초과) 시 해당 처리가 중단되고 구체적 오류 메시지를 제공한다
- Soft Fail(경고) 규칙 위반 시 경고와 함께 처리는 계속된다
- 투자자산의 중고품, 리스자산, 임대용 자산 여부를 자동 감지하여 공제 제외 대상임을 표시한다
- 이월결손금 FIFO 순서 오류 및 이월기한(2020년 이후 15년, 이전 10년) 도과 항목을 자동으로 탐지한다
- 검증 결과는 카테고리별, 규칙별로 정리된 리포트 형태로 제공한다

**스토리 포인트**: 13

---

### 3.2 EP-02: 사전 점검 및 자격 판단

---

#### US-005: 경정청구 불가 사유 자동 차단

**스토리**: 세무사로서, 경정청구가 불가능한 상황(5년 기한 초과, 결산조정 항목 소급 시도, 추계신고 감면 배제 등)을 시스템이 자동으로 탐지하여 차단해 주기를 원한다. 불가능한 경정청구로 인한 업무 낭비와 가산세 리스크를 막기 위해.

**인수 조건**:
- 경정청구 5년 기한 초과 시 즉시 Hard Fail 처리하고 사유를 안내한다
- 결산조정 항목(감가상각비 추가, 퇴직급여충당금 등) 소급 적용 시도 시 불가 사유를 상세히 설명한다
- 추계신고 개인사업자의 감면/공제 신청 시 조특법 제128조 근거와 함께 배제를 안내한다
- 직권경정 중 과소신고분 감면 제한(조특법 제128조 제3항) 해당 여부를 체크하고 Soft Fail 처리한다

**스토리 포인트**: 8

---

#### US-006: 중소기업 해당 여부 자동 판정

**스토리**: 세무사로서, 고객의 중소기업 해당 여부를 매출액·독립성·업종 기준으로 자동 판정받고 싶다. 중소기업 여부에 따라 공제율과 감면율이 크게 달라지기 때문이다.

**인수 조건**:
- 소기업/중기업/중견기업/대기업 구분을 매출액 및 독립성 기준(중소기업기본법 시행령 제3조)으로 자동 판정한다
- 졸업유예 기업(중소기업 유예기간 내)은 중소기업으로 처리한다
- 판정 근거(매출액 기준값, 적용 법령 조문)를 결과와 함께 제공한다
- 경정 대상 연도(과거 5년)마다 당시 기준으로 재판정한다

**스토리 포인트**: 5

---

#### US-007: 소재지 구분 판단 (법인/개인 분기)

**스토리**: 세무사로서, 소재지 구분(수도권 과밀억제권역/성장관리권역/수도권 외/인구감소지역) 판단이 법인과 개인사업자 기준에 맞게 자동으로 처리되기를 원한다. 소재지 판단 기준이 세목마다 달라 수작업 오류가 잦기 때문이다.

**인수 조건**:
- 법인(CORP): 본점이 수도권이면 모든 지점을 수도권으로 간주한다 (중소특별감면 제7조 단서). 단 통합투자세액공제(제24조)는 자산 실제 설치 장소 기준으로 별도 판단한다
- 개인(INC): 사업장별 소재지를 각각 개별 판단한다. 다사업장 입력 시 각 사업장별 소재지 코드를 기준정보(REF_S_CAPITAL_ZONE)와 교차 검증한다
- 인구감소지역(행정안전부 고시 기준) 해당 여부를 자동으로 확인하여 창업감면 100% 및 최저한세 배제 적용 여부를 판단한다
- 소재지별 적용 조항(중소특별/창업/통합투자) 차이를 결과 화면에 표로 표시한다

**스토리 포인트**: 8

---

#### US-008: 상시근로자 수 자동 산정

**스토리**: 세무사로서, 상시근로자 수(연평균)를 세법 기준에 따라 자동으로 산정받고 싶다. 청년등/일반 구분, 제외 대상 필터링, 연평균 계산에서 수작업 오류가 자주 발생하기 때문이다.

**인수 조건**:
- 제외 대상을 세목별로 다르게 처리한다:
  - 법인: 임원, 최대주주 4촌 이내 혈족/인척, 일용직, 주 15시간 미만 단시간
  - 개인: 대표자 본인, 배우자, 직계존비속
- 연평균 산정 공식: `TRUNCATE(SUM(월별인원) / 해당월수, 소수점 2자리)` (반올림 절대 금지)
- 청년 판단 시점을 과세연도에 따라 자동 분기한다:
  - 2024년 이전 경정청구: 과세연도 종료일 기준 (만 15~34세 + 병역 최대 6년)
  - 2025년 이후 경정청구: 근로계약 체결 당시 기준
- 산정 결과에 월별 내역과 청년등/일반 구분 명세를 포함한다

**스토리 포인트**: 8

---

### 3.3 EP-03: 공제/감면 계산 엔진

---

#### US-009: 통합투자세액공제 자동 계산 (§24)

**스토리**: 세무사로서, 통합투자세액공제를 기업 규모, 자산 유형, 직전 3년 평균 투자액에 따라 자동으로 계산받고 싶다. 추가공제율과 제외 자산 판단에서 계산 오류를 방지하기 위해.

**인수 조건**:
- 공제 대상 제외 자산(중고품, 리스자산, 임대용 자산, 수도권 과밀억제권역 자산)을 자동으로 필터링한다
- 기본공제: 투자금액 × 기업 규모별 공제율 (중소 10%, 중견 3%, 대기업 1%)
- 추가공제: (투자금액 - 직전 3년 평균 투자액) × 추가공제율. 2025년 이후 추가공제율은 10% (종전 3%)로 자동 적용한다
- 신성장원천기술/국가전략기술 자산은 별도 공제율을 적용한다
- 농특세(과세 20%)를 자동 계산하여 실질 환급액을 표시한다

**스토리 포인트**: 8

---

#### US-010: 통합고용세액공제 자동 계산 (§29의8)

**스토리**: 세무사로서, 통합고용세액공제를 상시근로자 증가 인원과 유형(청년등/일반/경력단절여성/정규직전환/육아휴직복귀)에 따라 자동 계산받고 싶다. 고용 증감 판단과 단가 적용에서 가장 많은 실수가 발생하기 때문이다.

**인수 조건**:
- 상시근로자 증가분(해당연도 - 직전연도)이 0 이하이면 기본공제 불가로 자동 처리한다
- 청년등 증가분이 전체 증가분을 초과하는 경우 전체 증가분으로 한정한다
- 공제 단가(2024년 중소기업 기준): 청년등 1,550만원, 일반 수도권 850만원 / 비수도권 950만원, 경력단절여성 1,300만원, 정규직전환 1,300만원, 육아휴직복귀 1,300만원
- 창업+고용 중복배제 규칙을 연도별로 다르게 처리한다:
  - 2024년 이전: 창업감면(§6) + 통합고용(§29의8) 병행 가능
  - 2025년 이후: 택일 적용 (중복 불가)
- 이월세액공제(직전 10년) 잔액을 자동으로 합산하여 총 공제 가능액을 표시한다
- 이월공제 기간: 10년

**스토리 포인트**: 13

---

#### US-011: 창업중소기업 세액감면 자동 계산 (§6)

**스토리**: 세무사로서, 창업감면 대상 여부와 감면율을 대표자 연령·소재지·창업 형태에 따라 자동 판단받고 싶다. 법인전환·동종사업 승계 등 복잡한 제외 요건 판단이 어렵기 때문이다.

**인수 조건**:
- 창업 형태 제외 요건(합병, 분할, 현물출자, 사업양수, 법인전환)을 자동 확인한다
- 대표이사/대표자 청년 여부(만 15~34세 + 병역이행 기간 최대 6년 가산)를 자동 계산한다
- 감면율을 과세연도별로 자동 적용한다:
  - 2024년 이전 창업: 수도권과밀억제권역 외 청년 100%, 비청년 50%; 수도권 청년 50%
  - 2025년 이후 창업: 수도권과밀억제권역 외 비청년 75% (종전 50% → 75%), 인구감소지역 100% (최저한세 배제 포함)
- 감면세액 공식: `산출세액 × (감면 대상 사업소득 / 각 사업연도 소득) × 감면율`
- 법인의 경우 감면세액이 최저한세(과세표준 × 7%)에 해당하는지 자동 체크한다

**스토리 포인트**: 8

---

#### US-012: 중소기업 특별세액감면 자동 계산 (§7)

**스토리**: 세무사로서, 중소기업 특별세액감면을 업종·소재지·규모별로 자동 계산받고 싶다. 소기업/중기업 구분에 따른 감면율 차이와 감면 한도(연 1억원) 계산이 복잡하기 때문이다.

**인수 조건**:
- 감면 제외 업종(소비성서비스업, 부동산임대업 등)을 KSIC 코드로 자동 판별한다
- 감면율을 업종·지역·규모 조합에 따라 자동 적용한다 (최소 0%~최대 30%)
- 감면 한도를 자동 계산한다: 기본 1억원, 상시근로자 감소 시 `MAX(0, 1억원 - 감소인원 × 500만원)`
- 개인사업자의 경우 사업장별 감면세액을 각각 산출 후 합산한다
- 창업감면(§6)과 중복 배제임을 자동으로 표시하고, 유리한 항목을 권고한다

**스토리 포인트**: 5

---

#### US-013: R&D 세액공제 자동 계산 (§10)

**스토리**: 세무사로서, R&D 세액공제를 당기분/증가분 방식 중 최적 방식을 자동으로 비교하여 선택받고 싶다. 5개년 데이터 기반 증가분 계산과 3단계 최저한세 배제 적용이 복잡하기 때문이다.

**인수 조건**:
- 당기분 방식과 증가분 방식을 모두 계산하여 더 유리한 방식을 자동으로 권고한다
- 기술 유형별 공제율을 자동 적용한다: 일반 R&D, 신성장원천기술, 국가전략기술
- 최저한세 배제를 3단계로 적용한다: 국가전략(전액 배제) > 신성장/중소(전액 배제) > 일반/중소(50% 배제)
- 이월 미공제액(직전 10년)을 자동으로 합산한다
- 위탁연구개발비, 인건비, 재료비, 감가상각비를 유형별로 구분하여 계산한다

**스토리 포인트**: 8

---

#### US-014: 사회보험료 세액공제 자동 계산 (§30의4) - 일몰 주의

**스토리**: 세무사로서, 사회보험료 세액공제 대상 기간(2024년 이전)과 일몰 이후 기간을 자동으로 구분받고 싶다. 2025년 이후 과세연도에 잘못 적용하는 실수를 방지하기 위해.

**인수 조건**:
- 적용 기한(2024.12.31.)을 자동 확인하여 2025년 이후 과세연도에는 해당 항목을 공제 목록에서 제외한다
- 대상 기간 내에서는 근로자 유형별 공제율(청년/경력단절 100%, 일반 50%)을 자동 적용한다
- 고용+사회보험 중복배제 규칙(§29의8와 §30의4 택일)을 자동으로 처리하고, 유리한 항목을 권고한다

**스토리 포인트**: 5

---

#### US-015: 법인 전용 세목 계산 (이월결손금, 수입배당금, 외국납부세액 등)

**스토리**: 세무사로서, 법인 전용 공제 항목(이월결손금 재검토, 수입배당금 익금불산입, 외국납부세액공제, 감가상각 시부인 이월추인)을 자동으로 계산받고 싶다. 연쇄 계산 오류(결손금 변동 → 과세표준 변동 → 최저한세 변동)를 방지하기 위해.

**인수 조건**:
- 이월결손금 FIFO 순서로 정렬하고 이월기한 도과 항목을 자동 제거한다 (2020년 이후: 15년, 이전: 10년)
- 이월결손금 변동이 과세표준·산출세액·최저한세에 미치는 연쇄 영향을 최대 5회 반복 계산으로 수렴시킨다 (MX-01 순환참조 해결)
- 수입배당금 익금불산입율을 지분율별로 자동 적용한다 (100%: 100%, 80%: 80%, 50%: 50%, 30%: 30%)
- 외국납부세액공제 방식(직접공제/간접공제/손금산입)을 비교하여 최적 방식을 권고한다
- 공제 한도: 중소기업 소득의 100%, 비중소기업 80%

**스토리 포인트**: 13

---

#### US-016: 개인사업자 전용 세목 계산 (소득공제, 공동사업 배분, 착한임대인 등)

**스토리**: 세무사로서, 개인사업자 전용 항목(소득공제 최적화, 공동사업자 배분, 노란우산공제, 연금저축공제, 자녀세액공제, 착한임대인 세액공제)을 자동으로 계산받고 싶다. 종합소득 합산 구조에서 비율 배분 계산이 복잡하기 때문이다.

**인수 조건**:
- 감면소득 배분 공식을 자동 적용한다: `산출세액 × (감면 대상 사업소득 ÷ 종합소득금액) × 감면율`
- 비과세·분리과세 소득을 종합소득금액 분모에서 자동 제외한다 (금융소득 2천만원 초과분은 포함)
- 노란우산공제 한도를 사업소득 구간별로 자동 적용한다: 사업소득 4천만원 이하 500만원, 1억원 이하 300만원, 1억원 초과 200만원
- 연금저축세액공제 한도(연 600만원)와 세율(총급여 5,500만원 이하 15%, 초과 12%)을 자동 적용한다
- 기장세액공제(§56의2)는 조특법 중복배제 대상이 아님을 자동으로 처리하여 다른 공제와 병행 가능하도록 한다

**스토리 포인트**: 13

---

### 3.4 EP-04: 최적 조합 탐색

---

#### US-017: 상호배제 규칙 자동 적용 (10규칙)

**스토리**: 세무사로서, 10개의 상호배제 규칙을 입력 항목에 자동으로 적용받고 싶다. 창업+고용 중복, 고용+사회보험 중복 등 불가 조합을 수작업으로 확인하는 부담을 줄이기 위해.

**인수 조건**:
- 10개 규칙을 모두 자동 체크한다 (REF_S_MUTUAL_EXCLUSION 기준정보 참조):
  - §6 창업 vs §7 중소특별: 택일 (항상 중복 불가)
  - §6 창업 vs §29의8 고용: 연도별 분기 (2024 이전 허용, 2025 이후 택일)
  - §7 중소특별 vs §29의8 고용: 병행 가능
  - §6 창업 vs §30의4 사보: 중복 불가
  - §29의8 고용 vs §30의4 사보: 택일
  - §6 제7항(수입 8천만원 이하) vs §29의8 고용: 중복 불가
  - 기타 4규칙 자동 적용
- 상호배제 충돌 발생 시 각 조합별 환급액을 비교하여 최적 조합을 권고한다
- 적용 연도(과세연도)에 따라 규칙이 달라지는 경우 자동으로 분기한다

**스토리 포인트**: 8

---

#### US-018: 최적 조합 자동 탐색 (Branch & Bound / Greedy)

**스토리**: 세무사로서, 상호배제 규칙 내에서 환급액을 최대화하는 공제/감면 조합을 자동으로 탐색받고 싶다. 수십 개 항목의 조합을 수작업으로 비교하는 것은 사실상 불가능하기 때문이다.

**인수 조건**:
- 후보 항목 15개 이하: Branch & Bound 정밀 탐색을 수행한다
- 후보 항목 15개 초과: Greedy 폴백(net_amount 내림차순 정렬 후 상위 15개 B&B, 나머지 상호배제 미충돌 시 추가)을 수행한다
- 세액 적용순서를 법령에 따라 처리한다: 감면 → 이월불가 공제 → 이월가능 공제 (법인 §59, 소득세 §60)
- 농특세를 항목별로 자동 적용한다: 비과세(§6, §7, §10) / 과세 20%(§24, §29의8, §30의4)
- 순환참조(과세표준 ↔ 최저한세)를 최대 5회 반복으로 수렴 처리한다 (수렴 기준: 1원 이하 차이)
- 최적 조합, 차선 조합 2가지를 비교 표시한다

**스토리 포인트**: 13

---

#### US-019: 최저한세 자동 적용

**스토리**: 세무사로서, 법인과 개인의 최저한세 계산 방식이 자동으로 구분되어 적용받고 싶다. 법인(과세표준 기준)과 개인(산출세액 기준)의 계산 방식이 다르고, 최저한세 배제 항목도 복잡하기 때문이다.

**인수 조건**:
- 법인(CORP) 최저한세: `과세표준 × 최저한세율`
  - 중소기업: 7%
  - 중소기업 외: 과세표준 100억원 이하 10%, 100억~1,000억원 12%, 1,000억원 초과 17%
- 개인(INC) 최저한세: `산출세액 × 최저한세율`
  - 산출세액 3천만원 이하: 35%
  - 산출세액 3천만원 초과분: 45%
- 최저한세 비대상 항목(기장세액공제, 성실사업자 의료비/교육비, 연금저축, 자녀세액 등)은 최저한세 계산에서 제외한다
- R&D 세액공제 최저한세 배제율 테이블(REF_C_RD_MIN_TAX_EXEMPT)을 연도별로 자동 참조한다

**스토리 포인트**: 8

---

### 3.5 EP-05: 보고서 생성 및 제출

---

#### US-020: 환급액 비교 보고서 생성

**스토리**: 세무사로서, 경정청구 전후 세액을 비교한 보고서를 자동으로 생성받고 싶다. 고객에게 환급액 근거와 계산 과정을 투명하게 설명하기 위해.

**인수 조건**:
- 보고서에 다음 8개 섹션을 포함한다:
  1. 요청 개요 (신청인, 과세연도, 세목)
  2. 납세자 기본정보 및 자격 판단 결과
  3. 사전 점검 결과 (통과/차단 항목)
  4. 항목별 공제/감면 계산 명세
  5. 최적 조합 비교 (최적안 vs 차선안)
  6. 환급액 계산표 (기존 결정세액 vs 경정 후 결정세액 → 환급액)
  7. 환급가산금 계산 (본세 기산일 / 중간예납 기산일 분리)
  8. 지방소득세 경정청구 안내 및 유의사항
- 모든 금액은 10원 미만 절사(반올림 금지)한 결과를 표시한다
- 보고서를 PDF, Excel, JSON 3종 포맷으로 내보낼 수 있다
- 보고서 생성 시간은 30초 이내이다

**스토리 포인트**: 8

---

#### US-021: 환급가산금 기본 계산 *(Phase 1 MVP 승격 — Plan v1.1)*

**스토리**: 세무사로서, 환급가산금을 본세와 중간예납세액 기산일을 분리하여 자동 계산받고 싶다. 기산일 계산 오류로 인한 환급가산금 과소/과다 청구를 방지하기 위해.

**인수 조건**:
- 본세 환급가산금 기산일: 법정신고기한 다음 날부터 기산
- 중간예납 환급가산금 기산일: 중간예납세액 납부일부터 기산 (다건 납부 시 납부일별 개별 계산)
- 법인세 환급가산금은 익금불산입(법인세법 §18 제4호) 처리 안내를 포함한다
- 환급가산금 이자율을 연도별로 자동 참조한다

**스토리 포인트**: 5

---

#### US-022: 경정청구서 초안 자동 생성 *(Phase 2)*

**스토리**: 세무사로서, 홈택스 경정청구서 서식(국세기본법 시행규칙 별지 제16호의2)에 맞는 초안을 자동으로 생성받고 싶다. 수작업으로 서식을 작성하는 시간을 줄이고 누락 항목을 방지하기 위해.

**인수 조건**:
- 계산된 환급액 및 근거 조항을 경정청구서 서식 항목에 자동으로 채워 넣는다
- 필수 첨부 서류 목록을 자동으로 생성하여 안내한다
- 생성된 초안은 세무사가 검토·수정할 수 있도록 편집 가능한 형태로 제공한다

**스토리 포인트**: 8

---

#### US-028: 지방소득세 환급액 안내 *(Phase 1 MVP 신규 — Plan v1.1)*

**스토리**: 세무사로서, 경정청구에 따른 지방소득세 환급 예상액(본세×10%)을 보고서에 포함하여 안내받고 싶다. 고객에게 국세 환급과 별도로 지방소득세 경정청구 필요성을 사전에 알리기 위해.

**인수 조건**:
- 지방소득세 환급 예상액 = 국세 환급액 × 10%로 자동 계산한다
- 보고서 8섹션 중 섹션 8(지방소득세 경정청구 안내)에 포함한다
- 지방소득세는 별도 경정청구가 필요함을 안내 문구로 명시한다
- 지자체별 자동 계산/제출은 범위 외(Out of Scope)임을 표시한다

**스토리 포인트**: 3

---

### 3.6 EP-06: 기준정보 관리

---

#### US-023: 세율/공제율 기준정보 연도별 관리

**스토리**: 시스템 관리자로서, 법인세·소득세 세율 테이블과 공제율을 연도별로 등록하고 관리하고 싶다. 세법 개정 시 기준정보를 안전하게 갱신하고, 경정청구 대상 연도(2018~2025)에 맞는 기준을 자동 적용하도록 하기 위해.

**인수 조건**:
- 기준정보는 REF_* 26개 테이블에 과세연도 기준으로 이력 관리된다
- 신규 과세연도 기준정보 입력 시 이전 연도 값을 기본값으로 복사하여 수정 부담을 줄인다
- 기준정보 갱신 전 변경 내역을 미리보기로 확인할 수 있다
- 갱신 완료 후 영향받는 기존 경정청구 요청이 있으면 관리자에게 알림을 발송한다
- 법령 버전 자동 매칭 모듈(MX-02)은 요청 과세연도에 따라 해당 연도 기준정보를 자동 참조한다

**스토리 포인트**: 8

---

#### US-024: 상호배제 규칙 관리

**스토리**: 시스템 관리자로서, 10개의 상호배제 규칙을 UI에서 직접 관리하고 싶다. 세법 개정으로 상호배제 규칙이 변경될 때 DB를 직접 수정하지 않고 안전하게 반영하기 위해.

**인수 조건**:
- 상호배제 규칙 목록을 조회, 추가, 수정, 비활성화할 수 있다
- 규칙별로 적용 시작/종료 과세연도를 설정할 수 있다 (연도별 조건부 규칙 지원)
- 규칙 변경 시 기존 산출 결과에 미치는 영향을 시뮬레이션할 수 있다

**스토리 포인트**: 5

---

### 3.7 EP-07: 대시보드 및 현황 관리

---

#### US-025: 고객별 경정청구 진행 현황 대시보드

**스토리**: 세무법인 매니저로서, 담당 고객별 경정청구 진행 단계와 예상 환급액을 한눈에 파악하고 싶다. 여러 건의 업무를 병렬로 관리하면서 누락이나 지연이 없도록 하기 위해.

**인수 조건**:
- 진행 단계(입력완료/점검중/산출완료/보고서생성/제출완료/환급완료)별 필터를 제공한다
- 과세연도별, 세목별 필터를 지원한다
- 기한 임박(경정청구 기한 5년) 건은 붉은색으로 강조 표시한다
- 총 예상 환급액 합계를 대시보드 상단에 표시한다

**스토리 포인트**: 5

---

#### US-026: 사후관리 알림

**스토리**: 세무사로서, 통합고용세액공제 등 사후관리 의무(공제 후 2년간 상시근로자 수 유지)가 있는 고객에 대해 자동 알림을 받고 싶다. 사후관리 미이행으로 인한 공제 취소 및 가산세 부담을 방지하기 위해.

**인수 조건**:
- 사후관리 의무 기간(공제 적용 후 2년)이 시작되면 담당 세무사에게 알림을 발송한다
- 사후관리 기간 만료 3개월 전, 1개월 전에 추가 알림을 발송한다
- 알림 수단은 이메일 및 시스템 내 알림으로 제공한다

**스토리 포인트**: 5

---

### 3.8 EP-08: 사용자 인증 및 권한 관리

---

#### US-027: RBAC 기반 역할별 접근 제어

**스토리**: 시스템 관리자로서, 세무사/매니저/관리자 역할별로 접근 가능한 기능을 제한하고 싶다. 권한 없는 사용자가 기준정보를 수정하거나 타 고객 데이터를 조회하는 것을 방지하기 위해.

**인수 조건**:
- 역할 구분: ADMIN(시스템관리자), MANAGER(세무법인 매니저), ACCOUNTANT(세무사), VIEWER(조회 전용)
- 세무사는 담당 고객 데이터만 조회 및 수정 가능하다
- 기준정보(REF_* 테이블) 수정은 ADMIN 역할만 가능하다
- JWT 토큰 기반 인증, 토큰 유효시간은 8시간이다
- req_id를 포함한 모든 API 요청은 토큰 검증 후 처리한다

**스토리 포인트**: 8

---

## 4. 우선순위 매트릭스 (MoSCoW)

### 4.1 Phase 1 (MVP) - Must Have

MVP 목표: 세무사가 법인세/종합소득세 경정청구 핵심 공제/감면(6개 항목)을 자동 산출하고 보고서를 생성할 수 있는 시스템

| 스토리 ID | 기능 | 에픽 | 이유 | 의존성 |
|:----------:|------|------|------|--------|
| US-001 | 경정청구 요청 생성 (req_id 발급) | EP-01 | 모든 기능의 출발점 | 없음 |
| US-002 | 법인 세무자료 입력 (32개 카테고리) | EP-01 | 법인 핵심 입력 | US-001 |
| US-003 | 개인사업자 세무자료 입력 | EP-01 | 개인 핵심 입력 | US-001 |
| US-004 | 입력 데이터 검증 (107개 규칙) | EP-01 | 오산출 방지 | US-002, US-003 |
| US-005 | 경정청구 불가 사유 자동 차단 | EP-02 | 업무 오류 방지 | US-004 |
| US-006 | 중소기업 해당 여부 판정 | EP-02 | 공제율 기반 | US-004 |
| US-007 | 소재지 구분 판단 | EP-02 | 법인/개인 분기 필수 | US-006 |
| US-008 | 상시근로자 수 산정 | EP-02 | 고용공제 기반 | US-004 |
| US-009 | 통합투자세액공제 계산 (§24) | EP-03 | 핵심 공제항목 | US-006, US-007 |
| US-010 | 통합고용세액공제 계산 (§29의8) | EP-03 | 환급 건수 1위 | US-008 |
| US-011 | 창업중소기업 감면 계산 (§6) | EP-03 | 환급 건수 2위 | US-006, US-007 |
| US-012 | 중소기업 특별세액감면 계산 (§7) | EP-03 | 환급 건수 3위 | US-006, US-007 |
| US-013 | R&D 세액공제 계산 (§10) | EP-03 | 환급 건수 5위 | US-006 |
| US-017 | 상호배제 규칙 자동 적용 | EP-04 | 조합 정확성 필수 | US-009~US-013 |
| US-018 | 최적 조합 탐색 (B&B/Greedy) | EP-04 | 환급액 극대화 핵심 | US-017 |
| US-019 | 최저한세 자동 적용 | EP-04 | 법인/개인 필수 | US-017 |
| US-020 | 환급액 비교 보고서 생성 | EP-05 | 산출물 핵심 | US-018, US-019 |
| US-021 | 환급가산금 기본 계산 (본세/중간예납 기산일 분리) | EP-05 | 보고서 완성도 | US-018, US-019 |
| US-028 | 지방소득세 환급액 안내 (본세×10%) | EP-05 | 고객 안내 필수 | US-020 |
| US-027 | RBAC 기반 인증/권한 관리 | EP-08 | 보안 기본 요건 | 없음 |
| US-023 | 세율/공제율 기준정보 관리 | EP-06 | 계산 정확성 기반 | 없음 |

---

### 4.2 Phase 2 (고도화) - Should Have

Phase 2 목표: 보고서 완성도, 사후관리, 법인 전용 항목 추가, 시뮬레이션

| 스토리 ID | 기능 | 에픽 | 이유 | 의존성 |
|:----------:|------|------|------|--------|
| US-014 | 사회보험료 세액공제 계산 (§30의4, 일몰) | EP-03 | 2024년 이전 환급 대상 | Phase 1 완료 |
| US-015 | 법인 전용 항목 계산 (이월결손금 등) | EP-03 | 법인 환급 완성도 | Phase 1 완료 |
| US-016 | 개인 전용 항목 계산 (노란우산, 연금저축 등) | EP-03 | 개인 환급 완성도 | Phase 1 완료 |
| US-022 | 경정청구서 초안 자동 생성 | EP-05 | 업무 자동화 | Phase 1 완료 |
| US-024 | 상호배제 규칙 UI 관리 | EP-06 | 관리 편의성 | Phase 1 완료 |
| US-025 | 진행 현황 대시보드 | EP-07 | 매니저 생산성 | Phase 1 완료 |
| US-026 | 사후관리 알림 | EP-07 | 리스크 관리 | Phase 1 완료 |
| M4-12 | 토지등 양도세 추가과세 (§55의2) | EP-03 | 법인 특수 항목 | Phase 1 완료 |
| M4-13 | 기업구조조정 과세이연 (§44~47) | EP-03 | 법인 특수 항목 | Phase 1 완료 |
| M4-14 | 연결납세 특화 점검 (§76의8) | EP-03 | 대기업 법인 지원 | Phase 1 완료 |
| M7-01 | 다수 과세연도 시뮬레이션 | EP-09 | 고급 기능 | Phase 2 완료 |
| M7-03 | 사후관리 리스크 평가 | EP-09 | 리스크 관리 | Phase 2 완료 |

---

### 4.3 Phase 3 (확장) - Could Have

Phase 3 목표: 데이터 자동수집, B2C 확장

| 스토리 ID | 기능 | 에픽 | 이유 |
|:----------:|------|------|------|
| EP-10 전체 | 홈택스 연동 자동수집 (RPA/API) | EP-10 | 경쟁사 대비 차별화 |
| P-05 지원 | B2C 개인사업자 셀프 서비스 | EP-10 | 시장 확대 |
| P4-13 | 재해손실세액공제 (개인) | EP-03 | 소수 케이스 |
| P4-14 | 벤처투자조합 출자 소득공제 | EP-03 | 소수 케이스 |

---

### 4.4 Won't Have (현재 이터레이션 제외)

| 기능 | 제외 사유 |
|------|-----------|
| 홈택스 직접 제출 연동 | 국세청 API 개방 여부 불확실, 규제 리스크 |
| 지방소득세 자동 계산 및 제출 | 지자체별 시스템 연동 복잡도 과다 |
| 부가가치세 경정청구 | 별도 세목, 이번 범위 초과 |
| AI 챗봇 상담 인터페이스 | 전문가(세무사) 대상 시스템에서 필요성 낮음 |
| 해외 세금 환급 지원 | 국내 세법 전용 시스템 |

---

### 4.5 의존성 다이어그램

```
[US-027 인증/권한] ─────────────────────────────────────────────────┐
[US-023 기준정보] ──────────────────────────────────────────────────┤
                                                                      ↓
[US-001 요청생성]
    ↓
[US-002 법인입력] ──→ [US-004 검증107규칙]
[US-003 개인입력] ─/
                            ↓
                    [US-005 불가사유차단]
                    [US-006 중소기업판정] ──→ [US-007 소재지판단]
                    [US-008 상시근로자]
                            ↓
            ┌───────────────────────────────────┐
            [US-009 투자§24] [US-010 고용§29의8] [US-011 창업§6]
            [US-012 중소특별§7] [US-013 R&D§10]
            └───────────────────────────────────┘
                            ↓
                    [US-017 상호배제10규칙]
                            ↓
                    [US-018 최적조합탐색] ──→ [US-019 최저한세]
                            ↓
              ┌─────────────────────────────────┐
              [US-020 보고서생성] [US-021 환급가산금]
              └─────────────────────────────────┘
                            ↓
                    [US-028 지방소득세안내]
```

---

## 5. 비기능 요구사항

### 5.1 성능 요구사항

| 항목 | 기준 | 측정 방법 |
|------|------|-----------|
| API 응답 시간 (요청 생성) | 1초 이내 | Spring Boot Actuator + JMeter |
| 계산 엔진 처리 시간 | 77개 항목 전체 산출 30초 이내 | 단위 테스트, 부하 테스트 |
| 보고서 생성 시간 | 30초 이내 | E2E 테스트 |
| 동시 처리 | 100 concurrent requests | JMeter 부하 테스트 |
| 데이터베이스 쿼리 | 주요 쿼리 100ms 이내 | EXPLAIN ANALYZE, 인덱스 최적화 |

### 5.2 정확성 요구사항

| 항목 | 기준 | 근거 |
|------|------|------|
| 금액 절사 | 10원 미만 TRUNCATE (반올림 절대 금지) | 조세법 정밀도 요건 |
| 비율 소수점 | 소수점 3자리 TRUNCATE | 설계서 정밀도 원칙 |
| 공식 정확도 | 57개 공식 단위 테스트 100% 통과 | JUnit5 단위 테스트 |
| 세율 연도별 정확도 | 2018~2025 세율 테이블 정확성 100% | 세법 원문 대조 검증 |

### 5.3 보안 요구사항

| 항목 | 기준 | 측정 방법 |
|------|------|-----------|
| 인증 | JWT 토큰, 유효시간 8시간 | Spring Security 단위 테스트 |
| 권한 관리 | RBAC 4단계 (ADMIN/MANAGER/ACCOUNTANT/VIEWER) | 역할별 접근 제어 통합 테스트 |
| 데이터 암호화 | 사업자번호, 주민등록번호 등 개인정보 AES-256 암호화 | 보안 감사 |
| 입력 검증 | OWASP Top 10 대응 (SQL Injection, XSS 등) | SAST 도구 (SonarQube) |
| 원본 데이터 보호 | INP_RAW_DATASET INSERT ONLY 정책 (물리적 삭제 불가) | DB 트리거 + 감사 로그 |
| 감사 로그 | 모든 계산 이력 AUD_CALCULATION_LOG에 보관 | 로그 완전성 테스트 |

### 5.4 신뢰성 및 가용성 요구사항

| 항목 | 기준 |
|------|------|
| 시스템 가용성 | 99.5% 이상 (월간 다운타임 3.6시간 이내) |
| 트랜잭션 원자성 | TX-1(입력), TX-2(계산) 단위 ACID 보장 |
| 계산 재현성 | 동일 req_id에 대해 동일 결과를 언제든 재산출 가능 (SMR_*는 INP_RAW_DATASET에서 재파싱) |
| 중복 요청 방지 | Idempotency-Key 기반 멱등성 보장 |
| 백업 | 일별 DB 스냅샷, 보관 기간 5년 (경정청구 기한과 동일) |

### 5.5 확장성 요구사항

| 항목 | 기준 |
|------|------|
| 세목 추가 | TAX_TYPE Enum 확장으로 신규 세목 지원 가능한 구조 |
| 점검항목 추가 | Strategy 패턴 (CreditCalculator) 적용으로 신규 공제/감면 모듈 독립 추가 |
| 기준정보 갱신 | REF_* 테이블 연도별 버전 관리로 세법 개정 반영 |
| 수평 확장 | Stateless API 설계로 인스턴스 수평 확장 가능 |

### 5.6 유지보수성 요구사항

| 항목 | 기준 |
|------|------|
| 테스트 커버리지 | 단위 테스트 80% 이상, 공식 단위 테스트 100% |
| 코드 품질 | SonarQube Lint 오류 0건, 기술 부채 A등급 |
| 문서화 | 모든 REST API Swagger/OpenAPI 3.0 문서화 |
| 로깅 | 계산 단계별 Logback 구조화 로그 (요청ID 포함) |

---

## 6. 리스크 및 제약사항

### 6.1 기술적 리스크

| 리스크 | 영향 | 발생 가능성 | 대응 방안 |
|--------|:----:|:----------:|-----------|
| 순환참조 수렴 실패 (과세표준↔최저한세) | 높음 | 중간 | 최대 5회 반복 + 수렴 실패 시 경고 메시지 + 최선 결과 반환 |
| Branch & Bound 알고리즘 성능 저하 (항목 과다 시) | 높음 | 낮음 | 15개 초과 시 Greedy 폴백 자동 전환, greedy_fallback_threshold 파라미터화 |
| 세율/기준정보 테이블 오입력 | 높음 | 중간 | 기준정보 입력 시 이전 연도 비교 표시, 변경 미리보기, 감사 로그 |
| 다중 공동사업자 지분 배분 계산 오류 | 중간 | 중간 | 지분율 합계 100% 자동 검증, 소수점 절사 일관 적용 |
| 이월결손금 연쇄 계산 무한 루프 | 높음 | 낮음 | 최대 반복 횟수 5회 제한, 발산 시 오류 처리 |

### 6.2 세법/규제 리스크

| 리스크 | 영향 | 발생 가능성 | 대응 방안 |
|--------|:----:|:----------:|-----------|
| 연간 세법 개정 (12월 말) | 높음 | 매우 높음 | 기준정보 테이블 분리 설계, 개정 후 2주 내 반영 목표 |
| 2025년 개정 창업+고용 중복배제 규칙 | 높음 | 이미 발생 | 과세연도별 규칙 분기 로직 구현 (US-017 요구사항 반영) |
| 사회보험료 공제 일몰 연장 가능성 | 중간 | 중간 | 적용기한 파라미터화, 일몰 연장 시 기준정보 갱신으로 즉시 대응 |
| 국세청 원클릭 환급 서비스 확대 | 중간 | 높음 | B2B 세무사 특화 기능(상호배제 최적화, 법인 전용 항목)으로 차별화 |
| 홈택스 API 정책 변경 | 중간 | 중간 | Phase 3 연동은 선택사항으로 설계, 수동 입력 경로 유지 |

### 6.3 비즈니스 리스크

| 리스크 | 영향 | 발생 가능성 | 대응 방안 |
|--------|:----:|:----------:|-----------|
| 경정청구 계산 오류로 인한 고객 손실/가산세 | 매우 높음 | 낮음 | 세무사 최종 검토 프로세스 유지, 시스템 산출 결과는 "초안" 표시, 감사 로그 완비 |
| 개인정보 유출 (사업자번호, 세무 자료) | 매우 높음 | 낮음 | AES-256 암호화, RBAC, 감사 로그, 개인정보보호법 준수 |
| 세무사 의존도 과다로 B2C 전환 지연 | 중간 | 중간 | Phase 1~2는 B2B 집중, Phase 3에서 B2C UX 별도 설계 |

### 6.4 기술 제약사항

| 항목 | 제약사항 |
|------|----------|
| 기술 스택 | Spring Boot 3.x + Java 17 + PostgreSQL 15 (변경 불가) |
| 계산 정밀도 | 금액 10원 미만 절사, 비율 소수점 3자리 절사 (반올림 절대 금지) |
| 원본 데이터 | INP_RAW_DATASET INSERT ONLY (변경 시 신규 버전 생성 필수) |
| 과세연도 범위 | 경정청구 대상 5년 범위 지원 (2018~2025년 세율 테이블 보유) |
| 최저한세 계산 | 법인(과세표준 기준)과 개인(산출세액 기준) 완전 분리 처리 |
| 데이터 보관 | 경정청구 기한(5년)에 맞춰 최소 5년간 데이터 보관 |

### 6.5 세목별 핵심 차이점 요약 (구현 주의사항)

| 구분 | 법인세 (CORP) | 종합소득세 (INC) |
|------|--------------|----------------|
| 과세단위 | 법인 1개 (사업장 합산) | 대표자(개인) 1인 기준 |
| 세율 | 9~24% 4단계 | 6~45% 8단계 |
| 소재지 판단 | 본점 수도권 → 전사업장 수도권 간주 | 사업장별 개별 판단 |
| 최저한세 기준 | 과세표준 × 7~17% | 산출세액 × 35%/45% |
| 이월결손금 한도 | 중소 100%, 일반 80% | 개인사업자 적용 상이 |
| 적용순서 근거 | 법인세법 §59 | 소득세법 §60 |
| 감면세액 배분 | 직접 계산 | 산출세액 × (감면소득÷종합소득) × 감면율 |
| 환급가산금 처리 | 법인세 익금불산입 (§18 ④) | 일반 소득 처리 |
| 상시근로자 제외 | 임원, 최대주주 4촌 이내 | 대표자, 배우자, 직계존비속 |
| 공제 결합 방식 | 법인 전용(이월결손금, 수입배당금 등) | 개인 전용(노란우산, 연금저축, 자녀세액 등) |

---

## 관련 문서

| 문서 | 경로 | 설명 |
|------|------|------|
| 개발설계서 v2.1 | `refer-to-doc/참고1번-development-design-v2.md` | 기술 아키텍처 및 모듈 설계 |
| 법인세 프롬프트 | `refer-to-doc/법인세-프롬프트_v2.0.md` | 40개 점검항목 상세 |
| 종합소득세 프롬프트 | `refer-to-doc/종합소득세-프롬프트_v2.0.md` | 37개 점검항목 상세 |
| 업계 리서치 | `refer-to-doc/참고2번-industry-research-tax-refund-programs.md` | 경쟁사 분석 |
| 세법기준 입력자료 | `refer-to-doc/경정청구-입력자료-세법기준-정리.md` | 입력 항목별 세법 근거 |

---

## 버전 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2026-02-18 | 최초 작성 - 페르소나 5개, 에픽 10개, 스토리 27개, MoSCoW 우선순위, 비기능 요구사항, 리스크 정의 | PM (bkit-product-manager) |
