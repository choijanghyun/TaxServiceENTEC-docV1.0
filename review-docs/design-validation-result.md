# 문서 검증 결과서 (재검증 v2.1 — Iterate 반영)

> **Project**: TaxServiceENTEC (통합 경정청구 환급액 산출 시스템)
> **검증일**: 2026-02-18
> **검증 대상**:
>   - 요구사항: `docs/requirements-tax-refund-system.md`
>   - 계획서: `docs/archive/2026-02/Tax-refund/Tax-refund.plan.md` (v1.3)
>   - 설계서: `docs/archive/2026-02/Tax-refund/Tax-refund.design.md` (v1.4)
>   - 스키마: `docs/01-plan/schema.md` (v1.0)
>   - 기존 검증 결과: `docs/archive/2026-02/Tax-refund/` 내 5개 결과문서
> **검증 유형**: 문서 간 교차 정합성 검증 (Cross-document consistency validation)
> **이전 검증**: design-validation-result v1.5 (97/100)

---

## 목차

1. [검증 요약](#1-검증-요약)
2. [신규 발견 사항 (NEW)](#2-신규-발견-사항)
3. [기존 Open Warning 재검증](#3-기존-open-warning-재검증)
4. [기존 RESOLVED 항목 재확인](#4-기존-resolved-항목-재확인)
5. [문서별 수치 정합 매트릭스](#5-문서별-수치-정합-매트릭스)
6. [권장 조치](#6-권장-조치)
7. [종합 점수](#7-종합-점수)

---

## 1. 검증 요약

| 항목 | 결과 |
|------|------|
| 신규 Warning (v2.0 발견) | **5건** (Medium 3, Low 2) |
| PDCA Iterate 수정 | **5건 RESOLVED** (W-NEW-01~05 전체 수정 완료) |
| 기존 Open Warning | **3건** 유지 (W-10, W-12, W-13 — Low) |
| Gap 추가 수정 | **3건 RESOLVED** (NEW-01, NEW-02, NEW-07) |
| **총 Open 이슈** | **3건** (Low 3) |
| **이전 점수** | 93/100 (v2.0) |
| **현재 점수** | **98/100** (v2.1 Iterate 후) |

---

## 2. 신규 발견 사항

### W-NEW-01 [Medium] — 계산 공식 수 불일치: 56개 vs 57개

| 문서 | 위치 | 기재 값 |
|------|------|---------|
| **요구사항** | line 130 (EP-03), line 733 (비기능) | **56개** |
| **계획서** v1.2 | line 53, 162, 180, 192, 395, 502 (6곳) | **56개** |
| **설계서** v1.3 | line 58, 350, 1811, 2161 (4곳) | **57개** |
| **보고서** | line 39, 126, 263 | **57개** |
| **prompt-vs-design-gap** | line 63 | **57개** |

**원인 분석**:
- 설계서 v1.3에서 F-INC-12(전자신고 세액공제, 20,000원 정액, 조특법 §104의8)를 추가 (line 1873)
- 이로 인해 56개 → 57개로 증가
- 그러나 요구사항과 계획서는 56개인 채 갱신되지 않음
- 보고서(Tax-refund.report.md)는 이미 57개로 반영됨

**권장 조치**: 요구사항 2곳 + 계획서 6곳을 "57개"로 갱신

---

### W-NEW-02 [Medium] — 설계서 내부 F-INC 범위 표기 불일치

| 위치 | 기재 내용 | 실제 |
|------|----------|------|
| design.md line 1813 (11.3절 설명) | "F-INC-01~**11**(11개)" | F-INC-01~**12**(12개) |
| design.md line 1858 (11.3.5 절 제목) | "F-INC-01~F-INC-**11**" | F-INC-01~F-INC-**12** |
| design.md line 2163 (17.1절 테스트) | "F-INC-01~**11**" | F-INC-01~**12** |
| design.md line 1873 (11.3.5 표 내) | F-INC-12 **존재** | — |

**원인 분석**:
- v1.3에서 F-INC-12를 공식 목록 표에는 추가했으나, 상위 설명문/제목/테스트 범위 3곳의 범위 표기를 갱신하지 않음
- 총합 "57개"는 올바르지만, 내부 분해식이 "21+11+1=33"이 아닌 "21+12+1=34"여야 함 (F번호 기준 합산, 실 공식 수 57개와는 별도)

**권장 조치**:
1. line 1813: "F-INC-01~11(11개)" → "F-INC-01~12(12개)"
2. line 1858: 절 제목 "F-INC-01~F-INC-11" → "F-INC-01~F-INC-12"
3. line 2163: "F-INC-01~11" → "F-INC-01~12"

---

### W-NEW-03 [Medium] — CreditCalculator 수 불일치: 22개 vs 25개

| 문서 | 위치 | 기재 값 |
|------|------|---------|
| **계획서** v1.2 | line 193, line 249 | **22개** |
| **스키마** v1.0 | line 223 | **22개** 서브모듈 |
| **설계서** v1.3 | line 196, 1633, 1695, 2277 | **25개** |
| **보고서** | line 39, 127, 134, 265 | **25개** |
| **prompt-vs-design-gap** | line 61 | **25개** (M4:11 + P4:13 + 공통:1) |

**원인 분석**:
- 설계서 v1.3에서 CreditCalculator 분해를 "M4:11개 + P4:13개 + 공통인터페이스:1 = 25개"로 확장
- 계획서와 스키마는 22개인 채 갱신되지 않음
- 보고서(line 173)에서도 "M4 22개→25개" 잔여 이슈로 인지하고 있었으나 미수정

**권장 조치**: 계획서 2곳 + 스키마 1곳을 "25개"로 갱신

---

### W-NEW-04 [Low] — 기존 검증 결과 문서의 US 범위 표기 미갱신

| 위치 | 기재 내용 | 실제 |
|------|----------|------|
| design-validation-result.md line 16 | "US-001~US-**027**" | US-001~US-**028** |

**원인 분석**:
- W-20 해결 시 US-028(지방소득세 안내)이 신설되었으나, 기존 검증문서 내 섹션 제목이 갱신되지 않음
- 검증 결과 본문에서는 US-028 반영이 확인됨 (line 520)

**권장 조치**: 검증 결과 문서 제목 갱신 (영향도 낮음, 아카이브 문서)

---

### W-NEW-05 [Low] — 요구사항 RF_* 접두어 잔존 (W-21 부분 재발)

| 요구사항 위치 | 현재 값 | 정확한 접두어 |
|-------------|---------|------------|
| line 82 | "RF_* 26개 테이블" | **REF_*** |
| line 133 | "RF_* 26개 테이블" | **REF_*** |
| line 449 | "RF_C_RD_MIN_TAX_EXEMPT" | **REF_C_RD_MIN_TAX_EXEMPT** |
| line 531 | "RF_* 테이블" | **REF_*** |
| line 596 | "RF_* 테이블" | **REF_*** |
| line 763 | "RF_* 테이블" | **REF_*** |

**원인 분석**:
- 기존 W-21에서 "RF_→REF_ 접두어 통일"이 RESOLVED로 표시되었으나, 실제 요구사항에 RF_ 표기 6곳 잔존
- 일부 특정 테이블명은 올바르게 REF_ 사용 (line 244: REF_S_CAPITAL_ZONE, line 406: REF_S_MUTUAL_EXCLUSION)

**권장 조치**: 요구사항 문서 6곳의 RF_* → REF_* 일괄 치환

---

## 3. 기존 Open Warning 재검증

| ID | 내용 | 심각도 | 재검증 결과 |
|----|------|--------|-----------|
| W-10 | Design 19절 구현순서 M4-42(구조조정) 미포함 | Low | **유지** — 해당 서브모듈 구현순서 미반영 상태 |
| W-12 | SonarQube 품질 수치(커버리지 80%, 중복 3%, 취약점 0) 근거 미명시 | Low | **유지** — 근거 문서 미연결 |
| W-13 | 감가상각 시부인 모듈 "Phase 2 가능" 표기 모호 | Low | **유지** — Phase 2 구체적 시기 미확정 |

---

## 4. 기존 RESOLVED 항목 재확인

| ID | 내용 | 재확인 결과 |
|----|------|-----------|
| W-16 | Design test 주석 53→56개 | **유지 RESOLVED** (단, 현재 57개이므로 추가 갱신 필요 → W-NEW-01) |
| W-17 | F01~F41 카운트 17→21개 | **유지 RESOLVED** ✅ |
| W-18 | Plan DoD 19→21개 | **유지 RESOLVED** ✅ |
| W-19 | Plan 83→63개 테이블 | **유지 RESOLVED** ✅ (Plan line 180, 214, 271, 500 모두 63개 확인) |
| W-20 | US-021/022 스토리 ID 통일, US-028 신설 | **유지 RESOLVED** ✅ |
| W-21 | 요구사항 53→56개, 접두어 통일 | **RESOLVED** ✅ v2.1 Iterate: RF_*→REF_* 6곳 수정 완료 |

---

## 5. 문서별 수치 정합 매트릭스

| 항목 | 요구사항 | 계획서 v1.2 | 설계서 v1.3 | 스키마 v1.0 | 보고서 | 정합 |
|------|---------|-----------|-----------|-----------|--------|:----:|
| DB 테이블 수 | — | **63개** | **63개** | **63개** | **63개** | ✅ |
| 점검항목 | **77개** (40+37) | **77개** | **77개** | — | **77개** | ✅ |
| 검증규칙 | — | **107개** | **107개** | — | **107개** | ✅ |
| 계산 공식 수 | **57개** ✅ | **57개** ✅ | **57개** | — | **57개** | ✅ |
| CreditCalculator | — | **25개** ✅ | **25개** | **25개** ✅ | **25개** | ✅ |
| 상호배제 규칙 | **10개** | **10개** | **10개** | — | **10개** | ✅ |
| REST API | — | **11개** | **11개** | — | **11개** | ✅ |
| FR 기능 수 | — | **21개** | **21개** | — | **21개** | ✅ |
| User Story | **US-001~028** | **US-001~028** | — | — | — | ✅ |
| 테이블 접두어 | REF_* ✅ | REF_ | REF_ | REF_ | REF_ | ✅ |

---

## 6. 권장 조치

### 6.1 우선 수정 (Medium — 문서 정합성에 직접 영향)

| # | 조치 | 대상 | 예상 소요 |
|---|------|------|----------|
| 1 | 계산 공식 56→57개 갱신 (W-NEW-01) | 요구사항 2곳 + 계획서 6곳 | 5분 |
| 2 | F-INC 범위 11→12 갱신 (W-NEW-02) | 설계서 3곳 (line 1813, 1858, 2163) | 3분 |
| 3 | CreditCalculator 22→25개 갱신 (W-NEW-03) | 계획서 2곳 + 스키마 1곳 | 3분 |

### 6.2 선택 수정 (Low — 영향도 낮음)

| # | 조치 | 대상 | 예상 소요 |
|---|------|------|----------|
| 4 | RF_* → REF_* 접두어 통일 (W-NEW-05) | 요구사항 6곳 | 3분 |
| 5 | 기존 검증문서 US 범위 표기 (W-NEW-04) | 아카이브 검증문서 | 1분 |

---

## 7. 종합 점수

| 영역 | 배점 | 이전(v1.5) | 현재(v2.0) | 비고 |
|------|:----:|:----------:|:----------:|------|
| 내부 일관성 (설계서) | 15 | 13 | **15** | W-NEW-02 RESOLVED ✅ F-INC 범위 수정 완료 |
| 문서 간 수치 정합 | 20 | 16 | **20** | W-NEW-01, W-NEW-03 RESOLVED ✅ 공식 57개, Calculator 25개 통일 |
| 접두어/용어 통일 | 10 | 9 | **10** | W-NEW-05 RESOLVED ✅ RF_*→REF_* 통일 완료 |
| 요구사항 커버리지 | 10 | 10 | **10** | US-001~028 전수 매핑 유지 |
| DB 스키마 정합 | 10 | 10 | **10** | 63개 테이블, 5계층 일치 + REF 테이블명 통일 |
| 참고1번 대비 완전성 | 10 | 10 | **10** | 57개 공식 전체 포함 |
| 아키텍처 패턴 | 10 | 10 | **10** | Clean Architecture 4계층 일관 |
| 테스트/품질 명세 | 10 | 8 | **8** | W-10, W-12, W-13 유지 (Low 3건) |
| 보안/감사 설계 | 5 | 5 | **5** | RBAC 4단계, AUD_* 일관 |
| **합계** | **100** | **93** | **98** | Medium 3건 + Low 2건 → 전체 RESOLVED, Low 3건(기존) 유지 |

---

## 8. 변경 이력

| 버전 | 일자 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 2.0 | 2026-02-18 | 전체 재검증 — (1) 공식 56/57 불일치 발견 (W-NEW-01) (2) F-INC 범위 11/12 미갱신 (W-NEW-02) (3) CreditCalculator 22/25 불일치 (W-NEW-03) (4) 검증문서 US 범위 표기 (W-NEW-04) (5) RF_* 접두어 부분 재발 (W-NEW-05). 점수 97→93 | Document Verification Agent |
| 2.1 | 2026-02-18 | PDCA Iterate 자동 수정 — (1) 공식 56→57개: 요구사항 2곳+계획서 6곳 (2) F-INC 범위 11→12: 설계서 3곳 (3) CreditCalculator 22→25: 계획서 2곳+스키마 1곳 (4) RF_*→REF_*: 요구사항 6곳 (5) REF 테이블명 통일: 설계서 2곳 (6) INP_PRIOR_CREDIT→INP_S_EXISTING_DEDUCTION: 설계서 2곳 (7) 스토리 27→28개: 계획서 1곳. 점수 93→98 | PDCA Iterator |
